# Kafka QA Realistic Testing ‚Äî Business Logic

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Kafka –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö. –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–¥—é—Å–µ—Ä –∏ –∫–æ–Ω—Å—å—é–º–µ—Ä —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫, DLQ –∏ event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.
---
–í –ø—Ä–æ–µ–∫—Ç–µ –∑–∞–ª–æ–∂–µ–Ω—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—à–∏–±–∫–∏ –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π.
---
–í –ø—Ä–æ–µ–∫—Ç–µ –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏–ª–∏ Docker Desktop.
–¢–∞–∫ –∂–µ –º–æ–∂–Ω–æ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Kafka UI.

## üß© –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
1. **–ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**  
   ‚ñ∂Ô∏è `Web API ‚Üí [PRODUCER] ‚Üí Kafka (orders.process) ‚Üí [CONSUMER] ‚Üí [PAYMENT SERVICE] (payment.process)`  
   ‚ñ∂Ô∏è `                                                        ‚Üì`  
   ‚ñ∂Ô∏è `                                                 DLQ (orders.process.dlq)`  
   > üí° Consumer —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º: –µ—Å–ª–∏ `amount > 100` ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ `payment.process`.  
   > üí° Consumer –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ DLQ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ payment.process).

## üì¶ 1. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (PRODUCER)
2. **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**  
   ‚ñ∂Ô∏è –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —Ç–æ–ø–∏–∫ `orders.process`  
   ‚ñ∂Ô∏è –ö–ª—é—á: `customer_id` ‚Üí —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º  
   ‚ñ∂Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏: `acks='all'`  
   ‚ñ∂Ô∏è –ü–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö: –¥–æ 3 —Ä–∞–∑  
3. **–¢–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (12 —à—Ç.):**  
   ‚ñ∂Ô∏è 5 –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö (–≤–∫–ª—é—á–∞—è `amount = 100.00`, `100.01`, `300.00`)  
   ‚ñ∂Ô∏è 7 —Å –æ—à–∏–±–∫–∞–º–∏: `amount = -10`, `0`, `null`, `"abc"`, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `order_id`/`customer_id`/`amount`  
4. **–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è:**  
   ```json
   {
     "order_id": "ORD-1001",
     "customer_id": "CUST-001",
     "amount": 99.99,
     "timestamp": 1706000000,
     "correlation_id": "uuid-string",
     "source": "web-api"
   }
–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π:
‚ñ∂Ô∏è order_id ‚Äî —É–Ω–∏–∫–∞–ª–µ–Ω (–∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∑–∞–∫–∞–∑)
‚ñ∂Ô∏è customer_id ‚Äî –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è
‚ñ∂Ô∏è amount ‚Äî –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è
‚ñ∂Ô∏è correlation_id ‚Äî –≤—Å–µ–≥–¥–∞ —É–Ω–∏–∫–∞–ª–µ–Ω (–¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏)


    üßÆ 2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º
–ü—Ä–∞–≤–∏–ª–æ:
‚ñ∂Ô∏è –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ customer_id ‚Üí –≤—Å–µ–≥–¥–∞ –≤ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏
‚ñ∂Ô∏è –¶–µ–ª—å: –≥–∞—Ä–∞–Ω—Ç–∏—è –ø–æ—Ä—è–¥–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
–ü—Ä–∏–º–µ—Ä:
‚ñ∂Ô∏è CUST-001 ‚Üí –≤—Å–µ –µ–≥–æ –∑–∞–∫–∞–∑—ã –≤ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏
‚ñ∂Ô∏è CUST-002 ‚Üí –≤ –¥—Ä—É–≥–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏
üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Kafka UI: –µ—Å–ª–∏ –æ–¥–∏–Ω customer_id –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ä—Ç–∏—Ü–∏—è—Ö ‚Äî —ç—Ç–æ –±–∞–≥.
    
    üîÑ 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (CONSUMER)
–í–∞–ª–∏–¥–∞—Ü–∏—è:
‚ñ∂Ô∏è –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: order_id, customer_id, amount
‚ñ∂Ô∏è amount > 0 ‚Äî –∏–Ω–∞—á–µ –æ—à–∏–±–∫–∞
Event-Driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
‚ñ∂Ô∏è –ï—Å–ª–∏ amount > 100 ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ payment.process
‚ñ∂Ô∏è –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: 
 ```json
{
  "order_id": "ORD-1002",
  "amount": 149.50,
  "payment_status": "pending",
  "processed_at": 1706000000
}
```
üìä –õ–æ–≥–∏–∫–∞ –ø–æ–ª—è amount
–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º:
‚ñ∂Ô∏è amount > 100 (–Ω–∞–ø—Ä., 100.01, 149.50, 300.00) ‚Üí ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ + –≤ payment.process
‚ñ∂Ô∏è amount == 100.00 ‚Üí ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ, –Ω–µ –≤ payment.process
‚ñ∂Ô∏è amount <= 0 (–Ω–∞–ø—Ä., 0, -10) ‚Üí ‚ùå –û—à–∏–±–∫–∞ ‚Üí –≤ DLQ
‚ñ∂Ô∏è amount = "abc" ‚Üí ‚ùå –û—à–∏–±–∫–∞ ‚Üí –≤ DLQ
‚ñ∂Ô∏è amount = null / –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí ‚ùå –û—à–∏–±–∫–∞ ‚Üí –≤ DLQ
üí° –ì—Ä–∞–Ω–∏—Ü–∞ 100 –∫—Ä–∏—Ç–∏—á–Ω–∞: 100.00 –∏ 100.01 –≤–µ–¥—É—Ç —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É.
  
    üì¶ 4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ DLQ
–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
‚ñ∂Ô∏è –ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
‚ñ∂Ô∏è –û—Ñ—Ñ—Å–µ—Ç –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è ‚Üí –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–Ω–æ–≤–∞
‚ñ∂Ô∏è –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ orders.process.dlq
‚ñ∂Ô∏è –û—Ä–∏–≥–∏–Ω–∞–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
–°—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫:
‚ñ∂Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
‚ñ∂Ô∏è amount <= 0
‚ñ∂Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON
‚ö†Ô∏è –ï—Å–ª–∏ DLQ –ø—É—Å—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Äî —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–æ–ª—á–∞.
    
    üîÑ 5. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
‚ñ∂Ô∏è –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –¥—É–±–ª–µ–π
‚ñ∂Ô∏è –û–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã
‚ñ∂Ô∏è –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—É–±–ª—è–º –≤ payment.process
üö® –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: –¥–æ–±–∞–≤—å—Ç–µ idempotency_key.

    üß™ 6. –¢–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è QA
–ü–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π:
‚ñ∂Ô∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å 3 –∑–∞–∫–∞–∑–∞ –¥–ª—è CUST-001 ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏—é
‚úÖ –í—Å–µ –≤ –æ–¥–Ω–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏
–í–∞–ª–∏–¥–∞—Ü–∏—è:
‚ñ∂Ô∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å amount = -10 ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å DLQ
‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –≤ orders.process.dlq
Event-driven:
‚ñ∂Ô∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å amount = 150 ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å payment.process
‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –≤ payment.process
–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚ñ∂Ô∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–¥–∏–Ω order_id –¥–≤–∞–∂–¥—ã ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å payment.process
‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ, 2 —Å–æ–æ–±—â–µ–Ω–∏—è
–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
‚ñ∂Ô∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å consumer ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ